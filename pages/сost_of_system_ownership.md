## 16.	Стоимость владения системой в первый, второй и пятый годы с учётом роста данных и базы пользователей.

### Допущения для модели:
- Рост пользователей: Год 1: 500k MAU, Год 2: 2M MAU, Год 5: 10M MAU.
- Рост данных: ~200 МБ/пользователь/год (треки, метрики, медиа).
- Команда: Платформенная (DevOps) — 5 чел., Разработка — 15 чел., Данные/ML — 3 чел.

### Год 1 (Запуск и рост MVP)
Фокус: Запуск модульного монолита в одном регионе (EU). Низкие затраты на инфраструктуру, высокие — на разработку.


|Категория|Статья расходов|Пример / Обоснование| Примерная годовая стоимость |
|-|-|-|-----------------------------|
|**CAPEX**|Лицензии ПО|• Лицензии на IDE, инструменты дизайна. <br> • Покупка perpetual-лицензий на некоторые enterprise-библиотеки (например, для отчетов). |$15,000|
||Оборудование| Ноутбуки для разработчиков (25 шт). <br> • Тестовые стенды (мобильные устройства).|$75,000|
||Нематериальные активы|• Разработка и патентирование ключевых алгоритмов (расчет износа, рекомендаций).|$50,000|
|**ИТОГО CAPEX**|-|-|~$140,000|
|**OPEX**|Облачная инфраструктура (AWS)|• Compute: 4x c5.large для монолита + ноды K8s: \$700/мес. <br> • Базы данных: RDS PostgreSQL (db.m5.large), ElastiCache (cache.t3.medium), MSK (Kafka): \$1,200/мес. <br> • Хранение: S3 (1 TB данных), EBS: \$300/мес. <br> • Сеть & CDN: CloudFront, Data Transfer Out (50 TB): \$1,000/мес. <br> • Managed Services: OpenSearch для логов, Managed Prometheus: $800/мес. |$48,000/год|
|-|Внешние SaaS-сервисы|• Auth0 / Keycloak Cloud (если SaaS), SendGrid/Twilio для email/SMS, Firebase Cloud Messaging, Sentry, Datadog/Grafana Cloud.|$30,000/год|
|-|Заработная плата команды|• 23 инженера (разработка, DevOps, данные) + налоги/бенефиты. Средняя $100k/год.|$2,500,000/год|
|-|Поддержка и обучение|• Контракты на enterprise-поддержку (например, для СУБД), курсы, конференции.|$50,000/год|
|**ИТОГО OPEX**|-|-|~$2,628,000/год|
|**ПРИМЕРНЫЙ ИТОГО TCO ГОД 1**|-|-|~$2,768,000|

#### Выводы по году 1: Доминирующая статья — зарплата команды (~90% OPEX). Инфраструктурные расходы минимальны. CAPEX — разовые вложения в создание актива.

### Год 2 (Масштабирование и монетизация)

Фокус: Рост в 4x. Выделение первых микросервисов (тренировки, социальная лента). Запуск в 2-м регионе (US). Активная монетизация.

|Категория|Статья расходов|Пример / Обоснование| Примерная годовая стоимость |
|-|-|-|-----------------------------|
|**CAPEX**|Лицензии ПО|Меньше затрат, так как стек выбран.|$5,000|
|-|Оборудование|Новые ноутбуки для расширяющейся команды.|$30,000|
|-|Нематериальные активы|Затраты на регистрацию и поддержку патентов.|$20,000|
|**ИТОГО CAPEX**|-|-|~\$55,000|
|**OPEX**|Облачная инфраструктура (AWS)|• Compute: Увеличивается в 3-4 раза из-за микросервисов и 2 регионов. Активное использование автоскейлинга: ~$3,500/мес. <br> • Базы данных: Шардирование/репликация в US регион. Увеличение инстансов: ~\$3,500/мес. <br> • Хранение: Рост до 10+ TB данных (треки, логи): ~\$2,000/мес. <br> • Сеть & CDN: Трафик между регионами и рост исходящего: ~\$3,000/мес. <br> • Managed Services: Усложнение стека observability: ~\$1,500/мес. |~$162,000/год|
|-|Внешние SaaS-сервисы|Рост из-за увеличения объема (push-уведомлений, email). Добавляется LaunchDarkly для feature flags.|$60,000/год|
|-|Заработная плата команды|Рост команды до 35 человек (новые feature-команды).|$4,000,000/год|
|-|Поддержка и обучение|Увеличение бюджета на тренинги и консультации.|$75,000/год|
|**ИТОГО OPEX**|-|-|~$4,297,000/год|
|**ПРИМЕРНЫЙ ИТОГО TCO ГОД 2**|-|-|~$4,352,000|


#### Выводы по году 2: Инфраструктурные расходы растут нелинейно (в 3-4 раза) из-за multi-region и микросервисов. Зарплатный фонд — по-прежнему основная статья, но его доля в OPEX снижается до ~93%. CAPEX становится незначительной.

### Год 5 (Зрелая глобальная платформа)
Фокус: 10M MAU. Полноценная микросервисная архитектура в 3+ регионах (EU, US, APAC). Активное использование ML и Big Data. Устоявшаяся монетизация.

|Категория|Статья расходов|Пример / Обоснование| Примерная годовая стоимость |
|-|-|-|-----------------------------|
|**CAPEX**|Лицензии ПО|Обновление инструментов.|$10,000|
|-|Оборудование|Замена парка оборудования.|$100,000|
|-|Нематериальные активы|Поддержка и расширение патентного портфеля.|$50,000|
|**ИТОГО CAPEX**|-|-|~$160,000|
|**OPEX**|Облачная инфраструктура (AWS)|• Compute: Десятки микросервисов, сотни pod-ов в K8s, серьезные ML-инференс кластера: ~\$25,000/мес. <br> • Базы данных: Крупные шардированные кластера Postgres/Timescale, большие инстансы Redis, ClickHouse для петабайтов аналитики: ~\$20,000/мес. <br  • Хранение: Сотни TB в S3 (треки, медиа, cold logs): ~\$10,000/мес.  <br>  • Сеть & CDN: Глобальный трафик, межрегиональная передача данных: ~\$15,000/мес. <br> • Managed Services: Полный стек enterprise-observability и security: ~\$5,000/мес. |~$900,000/год|
|-|Внешние SaaS-сервисы|Корпоративные тарифы на все инструменты, собственные SMS/email-шлюзы.|$200,000/год|
|-|Заработная плата команды|Команда 50+ инженеров (включая специализированные команды по ML, data engineering, platform): ~$7,500,000/год.|$7,500,000/год|
||Поддержка и обучение|Премиум-поддержка от вендоров, регулярные external security audits.|$150,000/год|
|**ИТОГО OPEX**|-|-|~$8,750,000/год|
|**ПРИМЕРНЫЙ ИТОГО TCO ГОД 5**|-|-|~$8,910,000|

#### Выводы по году 5: Структура затрат меняется. Доля инфраструктуры (~10% OPEX) и внешних сервисов становится существенной. Зарплаты — всё ещё ключевая статья (~86% OPEX), но их относительный вес продолжает снижаться. Главный драйвер роста TCO — не инфраструктура, а команда и сложность (микросервисы, ML, multi-region ops).


### Ключевые инсайты и рекомендации по управлению стоимостью:
1. Доминирующая статья: Заработная плата инженеров (85-93% OPEX). Главный рычаг оптимизации — производительность команд (Internal Developer Platform, качественная документация, автотесты, снижение cognitive load).
2. Инфраструктура: Рост расходов опережает рост пользователей из-за перехода на микросервисы и multi-region (Год 1->2: пользователи x4, инфраструктура x3.5; Год 2->5: пользователи x5, инфраструктура x5.5). Необходим строгий FinOps-контроль.
3. CAPEX vs OPEX: Современная cloud-архитектура сдвигает CAPEX в OPEX. Наши незначительные CAPEX — это в основном оборудование разработчиков. Это снижает риски и повышает гибкость.
4. Точки экономии:
* * Год 1-2: Использование reserved instances с частичной предоплатой для стабильной нагрузки (экономия до 40%).
* * Год 2-5: Оптимизация хранения данных (S3 Intelligent Tiering, lifecycle policies для логов, архивирование старых треков).
* * На всех этапах: Устранение неэффективности кода (профилирование, выбор оптимальных типов инстансов, clean-up неиспользуемых ресурсов).
5. Риск: При переходе к микросервисам (Год 2) возможен неконтролируемый рост инфраструктурных затрат из-за "распыления" ресурсов и неэффективного использования. Митагейшн: Централизованная платформенная команда, устанавливающая квоты и стандарты.

