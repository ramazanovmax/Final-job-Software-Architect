## b. Информационное представление

**Цель**: Показать, какие данные хранятся, обрабатываются и передаются в системе.

**Для кого**: Архитекторы данных, разработчики, юристы (compliance).

**Ключевые сущности и потоки данных**:
1. Core Domain (PostgreSQL):
* User: user_id, email, хэш пароля, цель, уровень, настройки приватности.
* UserConsent: consent_id, тип согласия (геолокация, биометрия), статус, дата.
* Workout: workout_id, user_id, тип, дата/время, длительность, дистанция, калории, ссылку на GPX-трек в S3.
* Gear: gear_id, user_id, тип, модель, дата начала использования, пробег (расчетный).
2. Социальный граф (PostgreSQL, позже Neo4j):
* Friendship: user_id, friend_id, статус.
* Group, GroupMembership.
3. События (Apache Kafka):
* События команд (Commands): RegisterUser, StartWorkout.
* Бизнес-события (Events): UserRegistered, WorkoutCompleted, FriendshipCreated, GearWearThresholdReached.
4. Аналитика (ClickHouse):
* Агрегированные таблицы: daily_user_activity, regional_workout_stats.
5. Неструктурированные данные (S3):
* GPX-треки, фотографии профилей, медиа из постов.

**Принципы управления данными**:
* Владелец данных: Каждый модуль монолита — единственный владелец своих агрегатов.
* Потоки: Репликация в аналитическое хранилище — через Kafka + ETL. Геоданные хранятся только при активном согласии.
* Жизненный цикл: Реализован механизм soft/hard delete для выполнения нфт удаление за 72 часа.
